---
title: Tambo AI
description: Use Tambo thread state with assistant-ui components.
---

<Callout type="warning">
  This is a bridge integration. Tambo `component` blocks can now map to native
  assistant-ui `type: "component"` parts, but you still need to register
  renderers under `MessagePrimitive.Parts` `components.Component`.
</Callout>

## Overview

If you're already using `@tambo-ai/react`, you can reuse Tambo's:

- streaming thread state
- thread list APIs
- run cancellation
- auth/session model

and render it through assistant-ui by using `ExternalStoreRuntime`.

## Install

<InstallCommand npm={["@assistant-ui/react", "@tambo-ai/react"]} />

## 1. Build a runtime bridge

```tsx title="app/tambo-runtime.tsx"
"use client";

import {
  type AppendMessage,
  type ThreadMessageLike,
  AssistantRuntimeProvider,
  useExternalMessageConverter,
  useExternalStoreRuntime,
} from "@assistant-ui/react";
import {
  TamboProvider,
  type TamboThreadMessage,
  useTambo,
  useTamboThreadInput,
  useTamboThreadList,
} from "@tambo-ai/react";
import type { ReactNode } from "react";
import { useMemo } from "react";

type MessageContentPart = Exclude<ThreadMessageLike["content"], string>[number];

const toThreadMessageLike = (message: TamboThreadMessage): ThreadMessageLike => {
  if (message.role === "system") {
    const text = message.content
      .filter((part) => part.type === "text")
      .map((part) => part.text)
      .join("\n");

    return {
      id: message.id,
      role: "system",
      content: [{ type: "text", text: text || "System message" }],
      ...(message.createdAt ? { createdAt: new Date(message.createdAt) } : {}),
    };
  }

  const content = message.content.flatMap<MessageContentPart>((part) => {
    switch (part.type) {
      case "text":
        return [{ type: "text", text: part.text }];
      case "tool_use":
        if (message.role !== "assistant") {
          return [{ type: "text", text: `Called ${part.name}` }];
        }
        return [
          {
            type: "tool-call",
            toolCallId: part.id,
            toolName: part.name,
            args: part.input ?? {},
            argsText: JSON.stringify(part.input ?? {}),
          },
        ];
      case "tool_result":
        return [{ type: "text", text: `Tool result received` }];
      case "component":
        return [
          {
            type: "component",
            name: part.name,
            props: (part.props ?? {}) as Record<string, unknown>,
          },
        ];
      case "resource":
        return [{ type: "text", text: `[Resource: ${part.resource.name}]` }];
      default:
        return [];
    }
  });

  return {
    id: message.id,
    role: message.role,
    content: content.length > 0 ? content : [{ type: "text", text: "" }],
    ...(message.createdAt ? { createdAt: new Date(message.createdAt) } : {}),
  };
};

function useTamboRuntimeBridge() {
  const {
    messages: tamboMessages,
    isStreaming,
    cancelRun,
    currentThreadId,
    switchThread,
    startNewThread,
    updateThreadName,
  } = useTambo();
  const { setValue, submit, isPending } = useTamboThreadInput();
  const threadListQuery = useTamboThreadList({ limit: 50 });

  const messages = useExternalMessageConverter({
    messages: tamboMessages,
    isRunning: isStreaming,
    callback: toThreadMessageLike,
  });

  const threadList = useMemo(
    () => ({
      threadId: currentThreadId,
      isLoading: threadListQuery.isLoading,
      threads:
        threadListQuery.data?.threads.map((thread) => ({
          status: "regular" as const,
          id: thread.id,
          externalId: thread.id,
          title: thread.name,
        })) ?? [],
      onSwitchToThread: async (threadId: string) => {
        switchThread(threadId);
      },
      onSwitchToNewThread: async () => {
        startNewThread();
      },
      onRename: async (threadId: string, newTitle: string) => {
        await updateThreadName(threadId, newTitle);
      },
    }),
    [
      currentThreadId,
      threadListQuery.data?.threads,
      threadListQuery.isLoading,
      startNewThread,
      switchThread,
      updateThreadName,
    ],
  );

  const onNew = async (message: AppendMessage) => {
    const text = message.content.find((part) => part.type === "text")?.text;
    if (!text?.trim()) {
      throw new Error("Tambo bridge currently supports text-only input.");
    }

    // Tambo's public submit API reads from shared input state.
    setValue(text);
    await Promise.resolve();
    await submit();
  };

  return useExternalStoreRuntime({
    messages,
    isRunning: isStreaming || isPending,
    onNew,
    onCancel: cancelRun,
    adapters: {
      threadList,
    },
  });
}

export function TamboAssistantProvider({
  children,
  apiKey,
  userKey,
}: Readonly<{
  children: ReactNode;
  apiKey: string;
  userKey: string;
}>) {
  return (
    <TamboProvider apiKey={apiKey} userKey={userKey}>
      <TamboAssistantRuntimeProvider>{children}</TamboAssistantRuntimeProvider>
    </TamboProvider>
  );
}

function TamboAssistantRuntimeProvider({
  children,
}: Readonly<{ children: ReactNode }>) {
  const runtime = useTamboRuntimeBridge();
  return (
    <AssistantRuntimeProvider runtime={runtime}>
      {children}
    </AssistantRuntimeProvider>
  );
}
```

## 2. Render your assistant-ui thread

```tsx title="app/page.tsx"
"use client";

import { Thread } from "@/components/assistant-ui/thread";
import { TamboAssistantProvider } from "./tambo-runtime";

export default function Page() {
  return (
    <TamboAssistantProvider
      apiKey={process.env.NEXT_PUBLIC_TAMBO_API_KEY!}
      userKey="user_123"
    >
      <Thread />
    </TamboAssistantProvider>
  );
}
```

## Known gaps

- The `onNew` bridge is text-first and does not support full multimodal payload mapping.
- Thread branching/edit/reload requires additional adapter handlers.

If you want full-fidelity support (component blocks, richer tool/result mapping,
and native composer behavior), consider building a dedicated
`@assistant-ui/react-tambo` package modeled after
`@assistant-ui/react-ag-ui` and `@assistant-ui/react-a2a`.
