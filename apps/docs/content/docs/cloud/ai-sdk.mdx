---
title: AI SDK
description: Add cloud persistence to any AI SDK app with two hooks — no UI library required.
---

import { InstallCommand } from "@/components/docs/fumadocs/install/install-command";

## Overview

The `assistant-cloud` package provides two hooks that add full thread persistence to any [AI SDK](https://sdk.vercel.ai/) application:

- **`useSync`** — persists `useChat` messages to the cloud and manages the active thread ID
- **`useThreads`** — provides a thread list with delete, rename, and archive operations

These hooks work with any React UI. You keep full control of your components.

## Prerequisites

<Callout type="info">
  You need an assistant-cloud account to follow this guide. [Sign up here](https://cloud.assistant-ui.com/) to get started.
</Callout>

## Setup

<Steps>

<Step>

### Create a Cloud Project

Create a new project in the [assistant-cloud dashboard](https://cloud.assistant-ui.com/) and from the settings page, copy your **Frontend API URL** (`https://proj-[ID].assistant-api.com`).

</Step>

<Step>

### Configure Environment Variables

```bash title=".env.local"
NEXT_PUBLIC_ASSISTANT_BASE_URL=https://proj-[YOUR-ID].assistant-api.com
```

</Step>

<Step>

### Install Dependencies

<InstallCommand npm={["assistant-cloud", "@ai-sdk/react", "ai"]} />

</Step>

<Step>

### Integrate

```tsx title="app/page.tsx"
"use client";

import { useChat } from "@ai-sdk/react";
import { AssistantCloud } from "assistant-cloud";
import { useSync, useThreads } from "assistant-cloud/ai-sdk";

const cloud = new AssistantCloud({
  baseUrl: process.env.NEXT_PUBLIC_ASSISTANT_BASE_URL!,
  anonymous: true,
});

export default function Chat() {
  const chat = useChat();

  // Thread list — { list, delete, rename, archive, refresh }
  const threads = useThreads(cloud);

  // Syncs messages to cloud, returns [threadId, selectThread, state]
  const [threadId, selectThread] = useSync(cloud, chat, {
    onThreadCreated: () => threads.refresh(),
  });

  return (
    <div>
      {/* Your thread list UI */}
      <ul>
        {threads.list.map((t) => (
          <li key={t.id} onClick={() => selectThread(t.id)}>
            {t.title}
          </li>
        ))}
        <li onClick={() => selectThread(null)}>New chat</li>
      </ul>

      {/* Your chat UI */}
      <div>
        {chat.messages.map((m) => (
          <div key={m.id}>{m.parts.map((p) => p.type === "text" && p.text)}</div>
        ))}
      </div>
    </div>
  );
}
```

</Step>

</Steps>

That's it. Messages persist automatically as they complete, and switching threads loads the full history.

## API Reference

### `useSync(cloud, chat, options?)`

Connects `useChat` to the cloud. Messages are persisted as they finish streaming. Thread creation is automatic on the first message.

**Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `cloud` | `AssistantCloud` | Cloud client instance |
| `chat` | `UseSyncChat` | Object with `messages`, `setMessages`, and `status` (from `useChat`) |
| `options.onThreadCreated` | `(id: string) => void` | Called when a new thread is auto-created |

**Returns:** `[threadId, selectThread, state]`

| Value | Type | Description |
|-------|------|-------------|
| `threadId` | `string \| null` | Current thread ID (`null` for a new unsaved chat) |
| `selectThread` | `(id: string \| null) => void` | Switch threads or pass `null` for a new chat |
| `state.isLoading` | `boolean` | `true` while loading thread messages |
| `state.error` | `Error \| null` | Last sync error, if any |

### `useThreads(cloud)`

Fetches and manages the thread list.

**Returns:** `UseThreadsResult`

| Value | Type | Description |
|-------|------|-------------|
| `list` | `CloudThread[]` | Active (non-archived) threads sorted by recency |
| `isLoading` | `boolean` | `true` during initial load or refresh |
| `error` | `Error \| null` | Last error, if any |
| `refresh` | `() => Promise<void>` | Re-fetch the thread list |
| `delete` | `(id: string) => Promise<void>` | Delete a thread |
| `rename` | `(id: string, title: string) => Promise<void>` | Rename a thread |
| `archive` | `(id: string) => Promise<void>` | Archive a thread (removes from list) |

## Authentication

The example above uses `anonymous: true` which creates a browser session-based user ID. For production apps with user accounts:

```tsx
import { useAuth } from "@clerk/nextjs";

const { getToken } = useAuth();

const cloud = new AssistantCloud({
  baseUrl: process.env.NEXT_PUBLIC_ASSISTANT_BASE_URL!,
  authToken: async () => getToken({ template: "assistant-ui" }),
});
```

See the [Cloud Authorization](/docs/cloud/authorization) guide for other auth providers.

## Next Steps

- If you want pre-built UI components, see [AI SDK + assistant-ui](/docs/cloud/ai-sdk-assistant-ui) for the full integration
- Learn about [user authentication](/docs/cloud/authorization) for multi-user applications
- Check out the [complete example](https://github.com/assistant-ui/assistant-ui/tree/main/examples/with-cloud-ai-sdk) on GitHub
