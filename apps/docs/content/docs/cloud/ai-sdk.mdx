---
title: AI SDK
description: Add cloud persistence to your existing AI SDK app with a single hook.
---

import { InstallCommand } from "@/components/docs/fumadocs/install/install-command";

## Overview

The `assistant-cloud` package provides a single hook that adds full message and thread persistence to any [AI SDK](https://sdk.vercel.ai/) application:

- **`useCloudChat`** — wraps `useChat` with automatic cloud persistence and built-in thread management

This hook works with any React UI. You keep full control of your components.

<Callout type="tip">
  Want pre-built UI components? See [AI SDK + assistant-ui](/docs/cloud/ai-sdk-assistant-ui) for the full integration with `<Thread />` and `<ThreadList />`.
</Callout>

## Prerequisites

<Callout type="info">
  You need an assistant-cloud account to follow this guide. [Sign up here](https://cloud.assistant-ui.com/) to get started.
</Callout>

## Setup

<Steps>

<Step>

### Create a Cloud Project

Create a new project in the [assistant-cloud dashboard](https://cloud.assistant-ui.com/) and from the settings page, copy your **Frontend API URL** (`https://proj-[ID].assistant-api.com`).

</Step>

<Step>

### Configure Environment Variables

```bash title=".env.local"
NEXT_PUBLIC_ASSISTANT_BASE_URL=https://proj-[YOUR-ID].assistant-api.com
```

</Step>

<Step>

### Install Dependencies

<InstallCommand npm={["assistant-cloud", "@ai-sdk/react", "ai"]} />

</Step>

<Step>

### Integrate

```tsx title="app/page.tsx"
"use client";

import { useState } from "react";
import { useCloudChat } from "assistant-cloud/ai-sdk";

export default function Chat() {
  // That's it! Thread management is included automatically.
  const { messages, sendMessage, threads } = useCloudChat();

  const [input, setInput] = useState("");
  const handleSubmit = async () => {
    const text = input.trim();
    if (!text) return;
    setInput("");
    await sendMessage({ parts: [{ type: "text", text }] });
  };

  return (
    <div>
      {/* Thread list */}
      <ul>
        {threads.threads.map((t) => (
          <li key={t.id} onClick={() => threads.selectThread(t.id)}>
            {t.title || "New conversation"}
          </li>
        ))}
        <li onClick={() => threads.selectThread(null)}>New chat</li>
      </ul>

      {/* Chat messages */}
      <div>
        {messages.map((m) => (
          <div key={m.id}>
            {m.parts.map((p) => p.type === "text" && p.text)}
          </div>
        ))}
      </div>

      {/* Composer */}
      <form onSubmit={(e) => { e.preventDefault(); handleSubmit(); }}>
        <input value={input} onChange={(e) => setInput(e.target.value)} />
        <button type="submit">Send</button>
      </form>
    </div>
  );
}
```

</Step>

</Steps>

That's it. Messages persist automatically as they complete, and switching threads loads the full history.

## API Reference

### `useCloudChat(options?)`

Wraps AI SDK's `useChat` with automatic cloud persistence and built-in thread management. Messages are persisted as they finish streaming. Thread creation is automatic on the first message — the hook will auto-create the thread, select it, refresh the thread list, and generate a title after the first response.

**Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `options.cloud` | `AssistantCloud` | Cloud instance (optional — falls back to `NEXT_PUBLIC_ASSISTANT_BASE_URL` env var) |
| `options.threads` | `UseThreadsResult` | External thread management from `useThreads()` (optional — for advanced control) |
| `options.includeArchived` | `boolean` | Include archived threads (default: `false`) |
| `options.autoGenerateTitle` | `boolean` | Auto-generate title after first response on new threads (default: `true`) |

All other [AI SDK `useChat` options](https://sdk.vercel.ai/docs/reference/ai-sdk-ui/use-chat) (except `transport`) are also accepted.

**Returns:** `UseCloudChatResult`

| Value | Type | Description |
|-------|------|-------------|
| `messages` | `UIMessage[]` | Chat messages (from AI SDK) |
| `status` | `string` | Chat status: `"ready"`, `"submitted"`, `"streaming"`, or `"error"` |
| `sendMessage` | `(message, options?) => Promise<void>` | Send a message (auto-creates thread if needed) |
| `stop` | `() => void` | Stop the current stream |
| `syncError` | `Error \| null` | Last sync error, if any |
| `threads` | `UseThreadsResult` | Thread management (see below) |

Plus all other properties from AI SDK's [`UseChatHelpers`](https://sdk.vercel.ai/docs/reference/ai-sdk-ui/use-chat).

**Thread management (`threads`):**

| Value | Type | Description |
|-------|------|-------------|
| `threads.threads` | `CloudThread[]` | Active threads sorted by recency |
| `threads.threadId` | `string \| null` | Current thread ID (`null` for a new unsaved chat) |
| `threads.selectThread` | `(id: string \| null) => void` | Switch threads or pass `null` for a new chat |
| `threads.isLoading` | `boolean` | `true` during initial load or refresh |
| `threads.error` | `Error \| null` | Last error, if any |
| `threads.refresh` | `() => Promise<boolean>` | Re-fetch the thread list |
| `threads.delete` | `(id: string) => Promise<boolean>` | Delete a thread |
| `threads.rename` | `(id: string, title: string) => Promise<boolean>` | Rename a thread |
| `threads.archive` | `(id: string) => Promise<boolean>` | Archive a thread |
| `threads.unarchive` | `(id: string) => Promise<boolean>` | Unarchive a thread |
| `threads.generateTitle` | `(threadId: string) => Promise<string \| null>` | Generate a title using AI |

### `useThreads(options)` (Advanced)

For advanced use cases where you need separate control over thread management. Most users should use `useCloudChat()` instead, which includes thread management automatically.

```tsx
// Advanced: External thread control
const myThreads = useThreads({ cloud: myCloud });
const { messages, sendMessage } = useCloudChat({ threads: myThreads });
```

**Parameters:**

| Parameter | Type | Description |
|-----------|------|-------------|
| `options.cloud` | `AssistantCloud` | Cloud client instance |
| `options.includeArchived` | `boolean` | Include archived threads (default: `false`) |
| `options.enabled` | `boolean` | Enable thread fetching (default: `true`) |

**Returns:** `UseThreadsResult` — same shape as `threads` from `useCloudChat()`.

## Authentication

The example above uses anonymous mode (browser session-based user ID) via the env var. For production apps with user accounts, pass an explicit cloud instance:

```tsx
import { useAuth } from "@clerk/nextjs";
import { AssistantCloud } from "assistant-cloud";
import { useCloudChat } from "assistant-cloud/ai-sdk";

function Chat() {
  const { getToken } = useAuth();

  const cloud = useMemo(() => new AssistantCloud({
    baseUrl: process.env.NEXT_PUBLIC_ASSISTANT_BASE_URL!,
    authToken: async () => getToken({ template: "assistant-ui" }),
  }), [getToken]);

  const { messages, sendMessage, threads } = useCloudChat({ cloud });
  // ...
}
```

See the [Cloud Authorization](/docs/cloud/authorization) guide for other auth providers.

## Next Steps

- If you want pre-built UI components, see [AI SDK + assistant-ui](/docs/cloud/ai-sdk-assistant-ui) for the full integration
- Learn about [user authentication](/docs/cloud/authorization) for multi-user applications
- Check out the [complete example](https://github.com/assistant-ui/assistant-ui/tree/main/examples/with-cloud-standalone) on GitHub
