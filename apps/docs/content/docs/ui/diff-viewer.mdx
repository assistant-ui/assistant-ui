---
title: "Diff Viewer"
description: Render code diffs with syntax highlighting for additions and deletions.
---

import { InstallCommand } from "@/components/docs/fumadocs/install/install-command";
import { ParametersTable } from "@/components/docs/tables/ParametersTable";
import { PreviewCode } from "@/components/docs/preview-code.server";
import {
  DiffViewerSample,
  DiffViewerSplitSample,
  DiffViewerViewModesSample,
} from "@/components/docs/samples/diff-viewer";

<DiffViewerViewModesSample />

## Installation

<InstallCommand shadcn={["diff-viewer"]} />

## Usage

```tsx
import { DiffViewer } from "@/components/assistant-ui/diff-viewer";

// With a unified diff patch
<DiffViewer patch={diffString} />

// With file comparison
<DiffViewer
  oldFile={{ content: "old content", name: "file.txt" }}
  newFile={{ content: "new content", name: "file.txt" }}
/>
```

### As Markdown Language Override

Integrate with `MarkdownTextPrimitive` to render diff code blocks:

```tsx title="/components/assistant-ui/markdown-text.tsx"
import { DiffViewer } from "@/components/assistant-ui/diff-viewer"; // [!code ++]

const MarkdownTextImpl = () => {
  return (
    <MarkdownTextPrimitive
      remarkPlugins={[remarkGfm]}
      className="aui-md"
      components={defaultComponents}
      componentsByLanguage={{                                       // [!code ++]
        diff: {                                                     // [!code ++]
          SyntaxHighlighter: ({ code }) => <DiffViewer patch={code} /> // [!code ++]
        },                                                          // [!code ++]
      }}                                                            // [!code ++]
    />
  );
};

export const MarkdownText = memo(MarkdownTextImpl);
```

## Examples

### Unified View

Shows all changes in a single column with `+`/`-` indicators. This is the default mode.

<DiffViewerSample />

```tsx
<DiffViewer patch={diffString} viewMode="unified" />
```

### Split View

Shows old content on the left, new content on the right side-by-side.

<DiffViewerSplitSample />

```tsx
<DiffViewer patch={diffString} viewMode="split" />
```

### Interactive Mode Toggle

<PreviewCode file="components/docs/samples/diff-viewer" name="DiffViewerViewModesSample">
  <DiffViewerViewModesSample />
</PreviewCode>

### Variants

Use the `variant` prop to change the visual style:

```tsx
<DiffViewer patch={diffString} variant="default" /> // Border with background
<DiffViewer patch={diffString} variant="ghost" />   // No border, transparent
<DiffViewer patch={diffString} variant="muted" />   // Muted background
```

### Sizes

Use the `size` prop to change the font size:

```tsx
<DiffViewer patch={diffString} size="sm" />      // Extra small text
<DiffViewer patch={diffString} size="default" /> // Default text
<DiffViewer patch={diffString} size="lg" />      // Large text
```

## API Reference

### DiffViewer

The main component for rendering diffs.

<ParametersTable
  type="DiffViewerProps"
  parameters={[
    {
      name: "patch",
      type: "string",
      description: "Unified diff string (e.g., output from git diff).",
    },
    {
      name: "code",
      type: "string",
      description: "Alias for patch (for markdown integration).",
    },
    {
      name: "oldFile",
      type: "{ content: string; name?: string }",
      description: "Old file for direct comparison.",
    },
    {
      name: "newFile",
      type: "{ content: string; name?: string }",
      description: "New file for direct comparison.",
    },
    {
      name: "viewMode",
      type: '"unified" | "split"',
      default: '"unified"',
      description: "Display mode for the diff.",
    },
    {
      name: "variant",
      type: '"default" | "ghost" | "muted"',
      default: '"default"',
      description: "Visual style variant.",
    },
    {
      name: "size",
      type: '"sm" | "default" | "lg"',
      default: '"default"',
      description: "Font size.",
    },
    {
      name: "showLineNumbers",
      type: "boolean",
      default: "true",
      description: "Show line numbers.",
    },
    {
      name: "className",
      type: "string",
      description: "Additional CSS classes.",
    },
  ]}
/>

### Composable API

| Component | Description |
|-----------|-------------|
| `DiffViewer` | The main component that renders the diff. |
| `DiffViewerHeader` | File name header with rename detection. |
| `DiffViewerLine` | Individual line in unified mode. |
| `DiffViewerSplitLine` | Side-by-side line pair in split mode. |

### Style Variants (CVA)

| Export | Description |
|--------|-------------|
| `diffViewerVariants` | Styles for the root container. |
| `diffLineVariants` | Background styles for diff lines. |
| `diffLineTextVariants` | Text color styles for diff lines. |

```tsx
import {
  diffViewerVariants,
  diffLineVariants,
  diffLineTextVariants,
} from "@/components/assistant-ui/diff-viewer";

// Use variants directly
<div className={diffViewerVariants({ variant: "ghost", size: "sm" })}>
  Custom diff container
</div>
```

## Styling

### Data Attributes

Use data attributes for custom styling:

| Attribute | Values | Description |
|-----------|--------|-------------|
| `data-slot` | `"diff-viewer"`, `"diff-viewer-header"`, `"diff-viewer-line"`, etc. | Component identification |
| `data-type` | `"add"`, `"del"`, `"normal"`, `"empty"` | Line type |
| `data-view-mode` | `"unified"`, `"split"` | Current view mode |
| `data-variant` | `"default"`, `"ghost"`, `"muted"` | Current variant |

### Custom CSS Example

```css
[data-slot="diff-viewer"][data-view-mode="split"] {
  /* Custom split view styles */
}

[data-slot="diff-viewer-line"][data-type="add"] {
  /* Custom addition styles */
}

[data-slot="diff-viewer-line"][data-type="del"] {
  /* Custom deletion styles */
}
```

## Related Components

- [Markdown](/docs/ui/markdown) - Rich text rendering where diff viewer can be integrated
- [Syntax Highlighting](/docs/ui/syntax-highlighting) - Code highlighting for other languages
