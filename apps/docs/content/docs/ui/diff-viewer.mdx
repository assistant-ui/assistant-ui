---
title: "Diff Viewer"
description: Render code diffs with syntax highlighting for additions and deletions.
---

import { InstallCommand } from "@/components/docs/fumadocs/install/install-command";
import { PreviewCode } from "@/components/docs/preview-code.server";
import {
  DiffViewerSample,
  DiffViewerSplitSample,
  DiffViewerViewModesSample,
} from "@/components/docs/samples/diff-viewer";

<DiffViewerViewModesSample />

## Installation

<InstallCommand shadcn={["diff-viewer"]} />

## Usage

```tsx
import { DiffViewer } from "@/components/assistant-ui/diff-viewer";

// With a unified diff patch
<DiffViewer patch={diffString} />

// With file comparison
<DiffViewer
  oldFile={{ content: "old content", name: "file.txt" }}
  newFile={{ content: "new content", name: "file.txt" }}
/>
```

### As Markdown Language Override

Integrate with `MarkdownTextPrimitive` to render diff code blocks:

```tsx title="/components/assistant-ui/markdown-text.tsx"
import { DiffViewer } from "@/components/assistant-ui/diff-viewer"; // [!code ++]

const MarkdownTextImpl = () => {
  return (
    <MarkdownTextPrimitive
      remarkPlugins={[remarkGfm]}
      className="aui-md"
      components={defaultComponents}
      componentsByLanguage={{                                       // [!code ++]
        diff: {                                                     // [!code ++]
          SyntaxHighlighter: ({ code }) => <DiffViewer patch={code} /> // [!code ++]
        },                                                          // [!code ++]
      }}                                                            // [!code ++]
    />
  );
};

export const MarkdownText = memo(MarkdownTextImpl);
```

## Examples

### Unified View

Shows all changes in a single column with `+`/`-` indicators. This is the default mode.

<DiffViewerSample />

```tsx
<DiffViewer patch={diffString} viewMode="unified" />
```

### Split View

Shows old content on the left, new content on the right side-by-side.

<DiffViewerSplitSample />

```tsx
<DiffViewer patch={diffString} viewMode="split" />
```

### Interactive Mode Toggle

<PreviewCode file="components/docs/samples/diff-viewer" name="DiffViewerViewModesSample">
  <DiffViewerViewModesSample />
</PreviewCode>

## API Reference

### Props

| Prop | Type | Default | Description |
|------|------|---------|-------------|
| `patch` | `string` | - | Unified diff string |
| `code` | `string` | - | Alias for `patch` (for markdown integration) |
| `oldFile` | `{ content: string; name?: string }` | - | Old file for comparison |
| `newFile` | `{ content: string; name?: string }` | - | New file for comparison |
| `viewMode` | `"unified" \| "split"` | `"unified"` | Display mode |
| `showLineNumbers` | `boolean` | `true` | Show line numbers |
| `className` | `string` | - | Additional CSS classes |

### Input Sources

You must provide one of the following:

| Source | Description |
|--------|-------------|
| `patch` / `code` | A unified diff string (e.g., output from `git diff`) |
| `oldFile` + `newFile` | Two files to compare directly |

## Styling

The component uses Tailwind CSS classes with sensible defaults:

| Line Type | Background | Text Color |
|-----------|------------|------------|
| Addition | `bg-green-500/20` | `text-green-700` / `dark:text-green-400` |
| Deletion | `bg-red-500/20` | `text-red-700` / `dark:text-red-400` |
| Context | - | - |

### Custom Styling

Use the `data-type` attribute on each line for custom styling:

```css
.aui-diff-viewer [data-type="add"] {
  /* custom addition styles */
}

.aui-diff-viewer [data-type="del"] {
  /* custom deletion styles */
}

.aui-diff-viewer [data-type="normal"] {
  /* custom context line styles */
}
```

## Related Components

- [Markdown](/docs/ui/markdown) - Rich text rendering where diff viewer can be integrated
- [Syntax Highlighting](/docs/ui/syntax-highlighting) - Code highlighting for other languages
