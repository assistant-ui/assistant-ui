@theme inline {
  @keyframes shimmer {
    0% {
      background-position: 150% 0;
    }
    100% {
      background-position: -50% 0;
    }
  }

  @keyframes shimmer-bg {
    0% {
      /* Start well left of the container + spread */
      translate: calc(
          -1 * (var(--shimmer-width, 600) + var(--shimmer-bg-spread, 400)) * 1px
        )
        0;
    }
    100% {
      translate: calc(var(--shimmer-width, 600) * 1px) 0;
    }
  }
}

@utility shimmer {
  --shimmer-color-default: var(--shimmer-color, oklch(0 0 0 / 0.8));
  --shimmer-spread-default: var(--shimmer-spread, 6ch);

  @variant dark {
    --shimmer-color-default: var(--shimmer-color, oklch(1 0 0 / 0.8));
  }

  /* Eased gradient: sine ease-in-out for smooth falloff at both center and edges */
  background:
    linear-gradient(
        var(--shimmer-angle, 90deg),
        transparent calc(50% - var(--shimmer-spread-default) * 0.5),
        color-mix(in oklch, var(--shimmer-color-default), transparent 94%)
          calc(50% - var(--shimmer-spread-default) * 0.42),
        color-mix(in oklch, var(--shimmer-color-default), transparent 76%)
          calc(50% - var(--shimmer-spread-default) * 0.33),
        color-mix(in oklch, var(--shimmer-color-default), transparent 50%)
          calc(50% - var(--shimmer-spread-default) * 0.25),
        color-mix(in oklch, var(--shimmer-color-default), transparent 24%)
          calc(50% - var(--shimmer-spread-default) * 0.17),
        color-mix(in oklch, var(--shimmer-color-default), transparent 6%)
          calc(50% - var(--shimmer-spread-default) * 0.08),
        var(--shimmer-color-default) 50%,
        color-mix(in oklch, var(--shimmer-color-default), transparent 6%)
          calc(50% + var(--shimmer-spread-default) * 0.08),
        color-mix(in oklch, var(--shimmer-color-default), transparent 24%)
          calc(50% + var(--shimmer-spread-default) * 0.17),
        color-mix(in oklch, var(--shimmer-color-default), transparent 50%)
          calc(50% + var(--shimmer-spread-default) * 0.25),
        color-mix(in oklch, var(--shimmer-color-default), transparent 76%)
          calc(50% + var(--shimmer-spread-default) * 0.33),
        color-mix(in oklch, var(--shimmer-color-default), transparent 94%)
          calc(50% + var(--shimmer-spread-default) * 0.42),
        transparent calc(50% + var(--shimmer-spread-default) * 0.5)
      )
      0 0 / 200% 100% no-repeat,
    linear-gradient(currentColor, currentColor);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: shimmer
    calc((var(--shimmer-width, 200) * 2) / var(--shimmer-speed, 100) * 1s)
    infinite linear;
  /* Delay syncs animation across elements: y adjusted by angle slope, minus x offset */
  animation-delay: calc(
    (
        var(--shimmer-y, 0) * tan(calc(90deg - var(--shimmer-angle, 90deg))) -
          var(--shimmer-x, 0)
      ) /
      var(--shimmer-speed, 100) * -1s
  );
}

@utility shimmer-speed-* {
  --shimmer-speed: --value(number);
}

@utility shimmer-color-* {
  --shimmer-color: --value(--color-*);
}

@utility shimmer-spread-* {
  --shimmer-spread: --spacing(--value(integer));
}

@utility shimmer-angle-* {
  --shimmer-angle: calc(--value(number) * 1deg);
}

@utility shimmer-bg {
  --shimmer-color-default: var(--shimmer-color, oklch(1 0 0 / 0.5));
  --shimmer-bg-spread-default: var(--shimmer-bg-spread, 400);
  position: relative;
  overflow: clip;

  @variant dark {
    --shimmer-color-default: var(--shimmer-color, oklch(1 0 0 / 0.25));
  }

  &::after {
    content: "";
    position: absolute;
    top: -150%;
    bottom: -150%;
    left: 0;
    width: calc(var(--shimmer-bg-spread-default) * 1px);
    /* Eased gradient: sine ease-in-out for smooth falloff at both center and edges */
    background: linear-gradient(
      90deg,
      transparent 0%,
      color-mix(in oklch, var(--shimmer-color-default), transparent 96%) 6%,
      color-mix(in oklch, var(--shimmer-color-default), transparent 83%) 13%,
      color-mix(in oklch, var(--shimmer-color-default), transparent 67%) 19%,
      color-mix(in oklch, var(--shimmer-color-default), transparent 50%) 25%,
      color-mix(in oklch, var(--shimmer-color-default), transparent 33%) 31%,
      color-mix(in oklch, var(--shimmer-color-default), transparent 17%) 38%,
      color-mix(in oklch, var(--shimmer-color-default), transparent 4%) 44%,
      var(--shimmer-color-default) 50%,
      color-mix(in oklch, var(--shimmer-color-default), transparent 4%) 56%,
      color-mix(in oklch, var(--shimmer-color-default), transparent 17%) 62%,
      color-mix(in oklch, var(--shimmer-color-default), transparent 33%) 69%,
      color-mix(in oklch, var(--shimmer-color-default), transparent 50%) 75%,
      color-mix(in oklch, var(--shimmer-color-default), transparent 67%) 81%,
      color-mix(in oklch, var(--shimmer-color-default), transparent 83%) 87%,
      color-mix(in oklch, var(--shimmer-color-default), transparent 96%) 94%,
      transparent 100%
    );
    transform: skewX(calc(90deg - var(--shimmer-angle, 90deg)));
    animation: shimmer-bg
      calc(
        (var(--shimmer-width, 600) + var(--shimmer-bg-spread-default)) /
          var(--shimmer-speed, 500) * 1s
      )
      infinite linear;
    /* Delay syncs animation across elements: y adjusted by angle slope, minus x offset */
    animation-delay: calc(
      (
          var(--shimmer-y, 0) * tan(calc(90deg - var(--shimmer-angle, 90deg))) -
            var(--shimmer-x, 0)
        ) /
        var(--shimmer-speed, 500) * -1s
    );
  }
}

@utility shimmer-width-* {
  --shimmer-width: --value(number);
}

@utility shimmer-y-* {
  --shimmer-y: --value(number);
}

@utility -shimmer-y-* {
  --shimmer-y: calc(-1 * --value(integer));
}

@utility shimmer-x-* {
  --shimmer-x: --value(number);
}

@utility -shimmer-x-* {
  --shimmer-x: calc(-1 * --value(integer));
}
